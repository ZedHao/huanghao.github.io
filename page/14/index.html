<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <meta name="description" content="一剑光寒十九州" />
  

  
  
  
  
  
  
  <title>NK一哥黄大脸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一剑光寒十九州">
<meta property="og:type" content="website">
<meta property="og:title" content="NK一哥黄大脸">
<meta property="og:url" content="https://zedhao.github.io/huanghao.github.io/page/14/index.html">
<meta property="og:site_name" content="NK一哥黄大脸">
<meta property="og:description" content="一剑光寒十九州">
<meta property="og:locale">
<meta property="article:author" content="huanghao">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/huanghao.github.io/css/images/favicon.ico">
  
  
<link rel="stylesheet" href="/huanghao.github.io/css/style.css">

  

  
  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/huanghao.github.io/atom.xml" title="NK一哥黄大脸" type="application/atom+xml">
</head>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/huanghao.github.io/" title="NK一哥黄大脸" rel="home">NK一哥黄大脸</a>
      </h1>
      
        <h2 <title>谦谦君子 温润如玉</title></h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/huanghao.github.io/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/huanghao.github.io/archives">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/huanghao.github.io/guestbook">guestbook</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-003.操作系统+计算机原理（linux）/本科操作系统入门/处理器调度" class="post-003.操作系统+计算机原理（linux）/本科操作系统入门/处理器调度 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/%E6%9C%AC%E7%A7%91%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6/" data-id="ckhp0x7ql0019932uepod9zed" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[toc]</p>
<h1 id="调度"><a href="#调度" class="headerlink" title="调度"></a>调度</h1><h2 id="什么是调度"><a href="#什么是调度" class="headerlink" title="什么是调度"></a>什么是调度</h2><p>当计算机系统死多道程序设计系统时，==通常就会有多个进程或者线程竞争CPU，只要有两个或者更多的进程处于就绪状态，这种情况就会发生，如果只有一个CPU可以用，那么必须选择下一个要运行的进程==，在操作系统中，完成选择工作的这一部分被称为调度程序（scheduler）。该程序使用的算法称为调度算法（scheduler algorithm）。</p>
<p><img src="https://images2015.cnblogs.com/blog/798615/201704/798615-20170407233049253-1948553968.png" alt="image"></p>
<h2 id="什么时候调度"><a href="#什么时候调度" class="headerlink" title="什么时候调度"></a>什么时候调度</h2><ol>
<li>在创建一个新进程后，需要决定是运行父进程还是子进程</li>
<li>==一个进程退出后必须进行调度==</li>
<li>在一个进程阻塞在I/O和信号量上或者由于其他原因阻塞的时候，必须选择另一个进程开始运行。</li>
<li>在一个I/O发生中断的时候，必须做出调度决策。</li>
<li>非抢占式调度：挑选一个进程，然后让该进程运行到被阻塞。</li>
<li>抢占式调度：挑选一个进程让他运行到某个固定时段的最大值。如果在改时间段结束时，该进程仍然在运行，它就会被挂起，而调度程序挑选另一个进程运行，如果存在一个就绪进程。进行抢占式调度处理，需要在事件间隔的末端发生时钟中断，以便把CPU控制返回给调度程序，如果没有可用的时钟，那么非抢占式调度就是唯一的选择。<h2 id="调度的目标"><a href="#调度的目标" class="headerlink" title="调度的目标"></a>调度的目标</h2></li>
</ol>
<ul>
<li>吞吐量 (throughout) : 系统每个小时完成的作业数量。</li>
<li>周转时间 (turnaround time) : 一个批处理作业提交时刻到完成该作业完成时刻为止的统计平均时间。</li>
<li>CPU利用率 (CPU Utilization) : 多用于度量批处理系统，反应CPU的使用情况<h2 id="处理器调度"><a href="#处理器调度" class="headerlink" title="处理器调度"></a>处理器调度</h2><h3 id="处理器调度的层次"><a href="#处理器调度的层次" class="headerlink" title="处理器调度的层次"></a>处理器调度的层次</h3><h4 id="低级调度：进程调度，决定哪个可用进程占用处理器执行"><a href="#低级调度：进程调度，决定哪个可用进程占用处理器执行" class="headerlink" title="低级调度：进程调度，决定哪个可用进程占用处理器执行"></a>低级调度：进程调度，决定哪个可用进程占用处理器执行</h4>就绪态-&gt;运行态</li>
</ul>
<ol>
<li>低级调度的主要功能：</li>
<li>记住进程或者内核级线程的状态</li>
<li>决定某个进程或者内核级线程什么时候获得处理器，以及占用多长时间</li>
<li>吧处理器分配给进程或者内核级线程</li>
<li>收回处理器</li>
<li>中级调度：</li>
</ol>
<p>平衡负载调度，决定主存中的可用进程集合，把一些进程调至外存去等待<br>挂起就绪态-&gt;就绪态</p>
<p>高级调度：作业调度，决定能否加入到可执行的进程池中</p>
<p>新建态-&gt;挂起就绪态/就绪态</p>
<h2 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h2><h3 id="批处理系统中的调度"><a href="#批处理系统中的调度" class="headerlink" title="批处理系统中的调度"></a>批处理系统中的调度</h3><h4 id="FCFS-先来先服务，队列实现，非抢占的-："><a href="#FCFS-先来先服务，队列实现，非抢占的-：" class="headerlink" title="FCFS(先来先服务，队列实现，非抢占的)："></a>FCFS(先来先服务，队列实现，非抢占的)：</h4><p>先请求CPU的进程先分配到CPU</p>
<p>==有利于长作业，但不利于短作业，因为短作业必须一直等待前面的长作业执行完毕才能执行，而长作业又需要执行很长时间，造成了短作业等待时间过长。==</p>
<h4 id="SJF-最短作业优先调度算法-："><a href="#SJF-最短作业优先调度算法-：" class="headerlink" title="SJF(最短作业优先调度算法)："></a>SJF(最短作业优先调度算法)：</h4><p>平均等待时间最短，但难以知道下一个CPU区间长度</p>
<p>长作业有可能会饿死，处于一直等待短作业执行完毕的状态。如果一直有短作业到来，那么长作业永远得不到调度。</p>
<h4 id="最短剩余时间优先-shortest-remaining-time-next"><a href="#最短剩余时间优先-shortest-remaining-time-next" class="headerlink" title="最短剩余时间优先 (shortest remaining time next)"></a>最短剩余时间优先 (shortest remaining time next)</h4><p>这个算法是最短作业优先算法的抢占式的版本，使用这个算法的时候，调度程序总是选择则剩余运行时间最短的那个进程运行。再次提醒，有关的运行时间必须提前掌握。当一个新的作业到达打的时候，其整个时间同当前进程的剩余时间进行比较。其进程的运行时间必须被提前知道，当一个新的作业到达的时候，其整个时间同当前进程的剩余时间作比较。如果较新的进程比当前运行的进程需要更少的时间，当前进程就会被挂起，而运行新的进程。这种方式可以使新的短作业获得良好的服务。</p>
<h3 id="交互式系统中的调度【例如有键盘IO的】"><a href="#交互式系统中的调度【例如有键盘IO的】" class="headerlink" title="交互式系统中的调度【例如有键盘IO的】"></a>交互式系统中的调度【例如有键盘IO的】</h3><h4 id="优先级调度算法-可以是抢占的，也可以是非抢占的-："><a href="#优先级调度算法-可以是抢占的，也可以是非抢占的-：" class="headerlink" title="优先级调度算法(可以是抢占的，也可以是非抢占的)："></a>优先级调度算法(可以是抢占的，也可以是非抢占的)：</h4><p>优先级越高越先分配到CPU，相同优先级先到先服务，存在的主要问题是：低优先级进程无穷等待CPU，会导致无穷阻塞或饥饿；解决方案：老化</p>
<p>除了可以手动赋予优先权之外，还可以把响应比作为优先权，这种调度方式叫做高响应比优先调度算法。</p>
<p>响应比 = (等待时间 + 要求服务时间) / 要求服务时间 = 响应时间 / 要求服务时间<br><img src="https://images2015.cnblogs.com/blog/798615/201704/798615-20170407233130269-853882980.png" alt="image"></p>
<p>上图的算法一目了然，就是把所有的进程分为四个优先级组，而在各类进程的内部采用轮转调度。如图3，只要存在优先级为4的进程，则不会理会优先级3，2，1的进程。当优先级4的队列为空后，才开始调度优先级3的进程。以此类推。</p>
<p>动态优先级调度要每隔一段时间调整进程的优先级，否则会发生饥饿。同时也要注意锁封护和优先级反转的问题。</p>
<p>这种调度算法主要是为了解决 SJF 中长作业可能会饿死的问题，因为随着等待时间的增长，响应比也会越来越高。</p>
<h4 id="时间片轮转调度算法-可抢占的-："><a href="#时间片轮转调度算法-可抢占的-：" class="headerlink" title="时间片轮转调度算法(可抢占的)："></a>时间片轮转调度算法(可抢占的)：</h4><p>队列中没有进程被分配超过一个时间片的CPU时间，除非它是唯一可运行的进程。如果进程的CPU区间超过了一个时间片，那么该进程就被抢占并放回就绪队列。<br><img src="https://images2015.cnblogs.com/blog/798615/201704/798615-20170407233102457-1541861276.png" alt="image"></p>
<p>时间片轮转算法的效率和时间片有很大关系。因为每次进程切换都要保存进程的信息并且载入新进程的信息，如果时间片太短，进程切换太频繁，在进程切换上就会花过多时间。</p>
<h4 id="多级队列调度算法："><a href="#多级队列调度算法：" class="headerlink" title="多级队列调度算法："></a>多级队列调度算法：</h4><p>将就绪队列分成多个独立的队列，每个队列都有自己的调度算法，队列之间采用固定优先级抢占调度。其中，一个进程根据自身属性被永久地分配到一个队列中。</p>
<h4 id="多级反馈队列调度算法："><a href="#多级反馈队列调度算法：" class="headerlink" title="多级反馈队列调度算法："></a>多级反馈队列调度算法：</h4><p>与多级队列调度算法相比，其允许进程在队列之间移动：若进程使用过多CPU时间，那么它会被转移到更低的优先级队列；在较低优先级队列等待时间过长的进程会被转移到更高优先级队列，以防止饥饿发生。</p>
<h3 id="实时系统中的调度【例如-多媒体实时系统】"><a href="#实时系统中的调度【例如-多媒体实时系统】" class="headerlink" title="实时系统中的调度【例如 多媒体实时系统】"></a>实时系统中的调度【例如 多媒体实时系统】</h3><p><img src="https://images2015.cnblogs.com/blog/798615/201704/798615-20170407233210675-1143570352.png" alt="image"></p>
<p>在实时系统中我们可以尝试设置一个主控时钟，该时钟每秒滴答适当的次数，例如针对NTSC制式的视频，每秒滴答30次，在时钟的每一个触发下，所有的进程都以相同的次序相继运行，当一个进程完成其工作时，它将发出suspend系统调用释放CPU直到主控时钟再次触发。当主控时钟再次响应，所有的进程再次以相同的次序运行。只要进程数较少，所有的工作都可以在一帧的时间内完成。采用轮转调度就可以了。但是模型相当不靠谱，因为不同的进程可能以不同的频率运行，具有不用的工作量，并且具有不同的最终时限。</p>
<h4 id="速率单调调度（实时静态算法）"><a href="#速率单调调度（实时静态算法）" class="headerlink" title="速率单调调度（实时静态算法）"></a>速率单调调度（实时静态算法）</h4><h4 id="最早最终时限调度（实时动态算法）"><a href="#最早最终时限调度（实时动态算法）" class="headerlink" title="最早最终时限调度（实时动态算法）"></a>最早最终时限调度（实时动态算法）</h4><h3 id="线程调度"><a href="#线程调度" class="headerlink" title="线程调度"></a>线程调度</h3><p>线程调度主要是分为用户级线程调度和内核级线程调度，他们的区别就是在于内核是否认识到有不同的线程，如下图所示：<br><img src="https://images2015.cnblogs.com/blog/798615/201704/798615-20170407233314160-1846999872.png" alt="image"></p>
<h2 id="Linux任务调度"><a href="#Linux任务调度" class="headerlink" title="Linux任务调度"></a>Linux任务调度</h2><p>linux将进程分成实时进程和普通进程，其实时进程应先于普通进程运行。<br>对于实时进程，采用FIFO和RR（时间片轮转调度）<br>对于普通进程，采取动态优先调度<br>系统中进程调度策略有哪几种？</p>
<p>FCFS(先来先服务，队列实现，非抢占的)：先请求CPU的进程先分配到CPU</p>
<p>SJF(最短作业优先调度算法)：平均等待时间最短，但难以知道下一个CPU区间长度</p>
<p>优先级调度算法(可以是抢占的，也可以是非抢占的)：优先级越高越先分配到CPU，相同优先级先到先服务，存在的主要问题是：低优先级进程无穷等待CPU，会导致无穷阻塞或饥饿；解决方案：老化</p>
<p>时间片轮转调度算法(可抢占的)：队列中没有进程被分配超过一个时间片的CPU时间，除非它是唯一可运行的进程。如果进程的CPU区间超过了一个时间片，那么该进程就被抢占并放回就绪队列。</p>
<p>多级队列调度算法：将就绪队列分成多个独立的队列，每个队列都有自己的调度算法，队列之间采用固定优先级抢占调度。其中，一个进程根据自身属性被永久地分配到一个队列中。</p>
<p>多级反馈队列调度算法：与多级队列调度算法相比，其允许进程在队列之间移动：若进程使用过多CPU时间，那么它会被转移到更低的优先级队列；在较低优先级队列等待时间过长的进程会被转移到更高优先级队列，以防止饥饿发生。</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/%E6%9C%AC%E7%A7%91%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8/%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6/">
    <time datetime="2020-11-19T16:00:28.790Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-003.操作系统+计算机原理（linux）/shell脚本" class="post-003.操作系统+计算机原理（linux）/shell脚本 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/shell%E8%84%9A%E6%9C%AC/" data-id="ckhp0x7pz0009932u0v6y6acx" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="什么事shell"><a href="#什么事shell" class="headerlink" title="什么事shell"></a>什么事shell</h1><p><a target="_blank" rel="noopener" href="https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=4292293932,2124869465&amp;fm=173&amp;app=25&amp;f=JPEG?w=502&amp;h=267&amp;s=561136661A6F44092E48CF780200107A">https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=4292293932,2124869465&amp;fm=173&amp;app=25&amp;f=JPEG?w=502&amp;h=267&amp;s=561136661A6F44092E48CF780200107A</a></p>
<p>最底下是计算机硬件，然后硬件被系统核心包住，在系统核心外层的就是shell，然后shell外层的就是我们最容易理解的应用程序，我们平时接触最多的就是应用程序了。</p>
<p>我们在系统的终端中输入一条命令，可以立马看到一条或者几条系统回复我们的信息，其实就是shell在帮我们回复，所以shell可以称之为命令解释器。这种从键盘一输入命令，就可以立马得到相应的回复信息，叫作交互的方式，</p>
<p>如果我们的命令或者应用程序不在命令行直接执行，而是通过一个程序文件来执行时，这个程序就被称之为shell脚本</p>
<p>就是windows的bat 或power shell</p>
<h1 id="shell应用场景"><a href="#shell应用场景" class="headerlink" title="shell应用场景"></a>shell应用场景</h1><h2 id="Shell能做什么"><a href="#Shell能做什么" class="headerlink" title="Shell能做什么"></a>Shell能做什么</h2><p>将一些复杂的命令简单化(平时我们提交一次github代码可能需要很多步骤，但是可以用Shell简化成一步)<br>可以写一些脚本自动实现一个工程中自动更换最新的sdk(库)<br>自动打包、编译、发布等功能<br>清理磁盘中空文件夹<br>总之一切有规律的活脚本都可以尝试一下</p>
<h2 id="Shell不能做什么"><a href="#Shell不能做什么" class="headerlink" title="Shell不能做什么"></a>Shell不能做什么</h2><p>需要精密的运算的时候<br>需要语言效率很高的时候<br>需要一些网络操作的时候<br>总之Shell就是可以快速开发一个脚本简化开发流程，并不可以用来替代高级语言</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/shell%E8%84%9A%E6%9C%AC/">
    <time datetime="2020-11-19T16:00:28.789Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-003.操作系统+计算机原理（linux）/书单" class="post-003.操作系统+计算机原理（linux）/书单 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/%E4%B9%A6%E5%8D%95/" data-id="ckhp0x7q0000a932ufhsp9alz" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="《操作系统：精髓与设计原理》"><a href="#《操作系统：精髓与设计原理》" class="headerlink" title="《操作系统：精髓与设计原理》"></a>《操作系统：精髓与设计原理》</h2><h2 id="《现代操作系统》"><a href="#《现代操作系统》" class="headerlink" title="《现代操作系统》"></a>《现代操作系统》</h2><h2 id="《深入理解计算机系统》"><a href="#《深入理解计算机系统》" class="headerlink" title="《深入理解计算机系统》"></a>《深入理解计算机系统》</h2><p><img src="B6C30050EF5C48FE871D46C5D6601DB7" alt="image"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/003.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F+%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86%EF%BC%88linux%EF%BC%89/%E4%B9%A6%E5%8D%95/">
    <time datetime="2020-11-19T16:00:28.789Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/SAS PAAS" class="post-007.架构工程/SAS PAAS post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/SAS%20PAAS/" data-id="ckhp0x7q3000f932u8hmi780q" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[TOC]<br>存储PHP应用的四种方式，共享服务器   虚拟私有服务器 专用服务器  平台即服务</p>
<h1 id="共享服务器"><a href="#共享服务器" class="headerlink" title="共享服务器"></a>共享服务器</h1><h1 id="虚拟私有服务器-VPS"><a href="#虚拟私有服务器-VPS" class="headerlink" title="虚拟私有服务器 VPS"></a>虚拟私有服务器 VPS</h1><h1 id="专用服务器"><a href="#专用服务器" class="headerlink" title="专用服务器"></a>专用服务器</h1><h1 id="平台即服务-PaaS"><a href="#平台即服务-PaaS" class="headerlink" title="平台即服务 PaaS"></a>平台即服务 PaaS</h1><h1 id="配置的步骤"><a href="#配置的步骤" class="headerlink" title="配置的步骤"></a>配置的步骤</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.购买服务器</span><br><span class="line">2.安装web服务器</span><br><span class="line">3.设置并管理一组PHP进程【apache nginx】（处理PHP请求，必须与web通信）</span><br></pre></td></tr></table></figure>









      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/SAS%20PAAS/">
    <time datetime="2020-11-19T16:00:28.788Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/开发通用方法论" class="post-007.架构工程/开发通用方法论 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E5%BC%80%E5%8F%91%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95%E8%AE%BA/" data-id="ckhp0x7q4000g932uew8m5pwh" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="设计相关"><a href="#设计相关" class="headerlink" title="设计相关"></a>设计相关</h1><p>不过度设计 复用易维护</p>
<h1 id="架构相关"><a href="#架构相关" class="headerlink" title="架构相关"></a>架构相关</h1><p><img src="https://img-blog.csdnimg.cn/20190612201305286.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3c2MDUyODMwNzM=,size_16,color_FFFFFF,t_70" alt="image"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E5%BC%80%E5%8F%91%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95%E8%AE%BA/">
    <time datetime="2020-11-19T16:00:28.787Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/数据中台/数据中心" class="post-007.架构工程/数据中台/数据中心 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83/" data-id="ckhp0x7qx001w932u1w5e49lj" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="数据驱动业务增长"><a href="#数据驱动业务增长" class="headerlink" title="数据驱动业务增长"></a>数据驱动业务增长</h1><h1 id="架构方案"><a href="#架构方案" class="headerlink" title="架构方案"></a>架构方案</h1><ol>
<li>为大数据的全生命周期提供服务，</li>
<li>覆盖数据产生，传输，建模，统计分析，实验评估，可视化的全流程。</li>
<li>服务对象是全公司的用户产品，并可扩展至外部公司。</li>
<li>服务方式包括平台产品，自动化工具，和统一的方案规范，同时对核心的用户产品线，结合业务提供直接支持</li>
<li><h1 id="整体划分"><a href="#整体划分" class="headerlink" title="整体划分"></a>整体划分</h1><h2 id=""><a href="#" class="headerlink" title=""></a></h2></li>
</ol>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83/">
    <time datetime="2020-11-19T16:00:28.787Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/设计模式与编程思想/UML类图详解和类关系" class="post-007.架构工程/设计模式与编程思想/UML类图详解和类关系 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/UML%E7%B1%BB%E5%9B%BE%E8%AF%A6%E8%A7%A3%E5%92%8C%E7%B1%BB%E5%85%B3%E7%B3%BB/" data-id="ckhp0x7qx001x932ua7g0enxg" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[TOC]<br><a target="_blank" rel="noopener" href="https://www.awaimai.com/patterns">https://www.awaimai.com/patterns</a></p>
<h1 id="UML类图详解"><a href="#UML类图详解" class="headerlink" title="UML类图详解"></a>UML类图详解</h1><h2 id="类结构"><a href="#类结构" class="headerlink" title="类结构"></a>类结构</h2><p>在类的UML图中，使用长方形描述一个类的主要构成，长方形垂直地分为三层，以此放置类的名称、属性和方法。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/structure.png" alt="image"></p>
<h2 id="类关系"><a href="#类关系" class="headerlink" title="类关系"></a>类关系</h2><p>类与类之间的关系主要有六种：继承、实现、组合、聚合、关联和依赖，这六种关系的箭头表示<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/arrow.png" alt="image"></p>
<h2 id="六种类关系"><a href="#六种类关系" class="headerlink" title="六种类关系"></a>六种类关系</h2><p>六种类关系中，组合、聚合、关联这三种类关系的代码结构一样，都是用属性来保存另一个类的引用，所以要通过内容间的关系来区别。</p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>继承关系也称泛化关系（Generalization），用于描述父类与子类之间的关系。==父类又称作基类，子类又称作派生类。==</p>
<p>==继承关系中，子类继承父类的所有功能，父类所具有的属性、方法，子类应该都有==。子类中除了与父类一致的信息以外，还包括额外的信息。</p>
<p><img src="https://www.awaimai.com/wp-content/uploads/2016/07/realization.png" alt="image"></p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>3.2 实现<br>实现关系（Implementation），主要用来==规定接口和实现类的关系==。</p>
<p>接口（包括抽象类）是方法的集合，在实现关系中，类实现了接口，类中的方法实现了接口声明的所有方法。</p>
<p>例如：汽车和轮船都是交通工具，而交通工具只是一个可移动工具的抽象概念，船和车实现了具体移动的功能。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/implement.png" alt="image"></p>
<h3 id="组合关系"><a href="#组合关系" class="headerlink" title="组合关系"></a>组合关系</h3><p>组合关系（Composition）：==整体与部分的关系，但是整体与部分不可以分开。==</p>
<p>组合关系表示类之间整体与部分的关系，整体和部分有一致的生存期。一旦整体对象不存在，部分对象也将不存在，是同生共死的关系。</p>
<p>例如：人由头部和身体组成，两者不可分割，共同存在。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/composition.png" alt="image"></p>
<h3 id="聚合关系"><a href="#聚合关系" class="headerlink" title="聚合关系"></a>聚合关系</h3><p>聚合关系（Aggregation）：整体和部分的关系，整体与部分可以分开。</p>
<p>聚合关系也表示类之间整体与部分的关系，成员对象是整体对象的一部分，但是成员对象可以脱离整体对象独立存在。</p>
<p>例如：公交车司机和工衣、工帽是整体与部分的关系，但是可以分开，工衣、工帽可以穿在别的司机身上，公交司机也可以穿别的工衣、工帽。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/aggregation.png" alt="image"></p>
<h3 id="关联关系"><a href="#关联关系" class="headerlink" title="关联关系"></a>关联关系</h3><p>关联关系（Association）：表示一个类的属性保存了对另一个类的一个实例（或多个实例）的引用。</p>
<p>关联关系是类与类之间最常用的一种关系，表示一类对象与另一类对象之间有联系。组合、聚合也属于关联关系，只是关联关系的类间关系比其他两种要弱。</p>
<p>关联关系有四种：双向关联、单向关联、自关联、多重数关联。</p>
<p>例如：汽车和司机，一辆汽车对应特定的司机，一个司机也可以开多辆车。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/association.png" alt="image"></p>
<h3 id="依赖关系"><a href="#依赖关系" class="headerlink" title="依赖关系"></a>依赖关系</h3><p>依赖关系（Dependence）：假设A类的变化引起了B类的变化，则说名B类依赖于A类。</p>
<p>大多数情况下，依赖关系体现在某个类的方法使用另一个类的对象作为参数。</p>
<p>依赖关系是一种“使用”关系，特定事物的改变有可能会影响到使用该事物的其他事物，在需要表示一个事物使用另一个事物时使用依赖关系。</p>
<p>例如：汽车依赖汽油，如果没有汽油，汽车将无法行驶。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/dependence.png" alt="image"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这六种类关系中，组合、聚合和关联的代码结构一样，可以从关系的强弱来理解，各类关系从强到弱依次是：继承→实现→组合→聚合→关联→依赖。如下是完整的一张UML关系图。<br><img src="https://www.awaimai.com/wp-content/uploads/2016/07/whole.png" alt="image"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/UML%E7%B1%BB%E5%9B%BE%E8%AF%A6%E8%A7%A3%E5%92%8C%E7%B1%BB%E5%85%B3%E7%B3%BB/">
    <time datetime="2020-11-19T16:00:28.786Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/设计模式与编程思想/php设计模式" class="post-007.架构工程/设计模式与编程思想/php设计模式 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/php%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" data-id="ckhp0x7rw003y932u8sslfrh9" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[TOC]</p>
<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h2><h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>eg：当订单创建后，系统会发送邮件和短信，并保存日志记录。<br>在观察者模式中，被观察者完全不需要关心观察者，在自身状态有变化是，遍历执行观察者update()方法即完成通知。<br><a target="_blank" rel="noopener" href="https://www.awaimai.com/patterns/observer">https://www.awaimai.com/patterns/observer</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">&#x2F;**</span><br><span class="line"> * 被观察者接口</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface Observable</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; 添加&#x2F;注册观察者</span><br><span class="line">    public function attach(Observer $observer);</span><br><span class="line">    &#x2F;&#x2F; 删除观察者</span><br><span class="line">    public function detach(Observer $observer);</span><br><span class="line">    &#x2F;&#x2F; 触发通知</span><br><span class="line">    public function notify();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 被观察者</span><br><span class="line"> * 职责：添加观察者到$observers属性中，</span><br><span class="line"> * 有变动时通过notify()方法运行通知</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Order implements Observable</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; 保存观察者</span><br><span class="line">    private $observers &#x3D; array();</span><br><span class="line">    &#x2F;&#x2F; 订单状态</span><br><span class="line">    private $state &#x3D; 0;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 添加（注册）观察者</span><br><span class="line">    public function attach(Observer $observer)</span><br><span class="line">    &#123;</span><br><span class="line">        $key &#x3D; array_search($observer, $this-&gt;observers);</span><br><span class="line">        if ($key &#x3D;&#x3D;&#x3D; false) &#123;</span><br><span class="line">            $this-&gt;observers[] &#x3D; $observer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 移除观察者</span><br><span class="line">    public function detach(Observer $observer)</span><br><span class="line">    &#123;</span><br><span class="line">        $key &#x3D; array_search($observer, $this-&gt;observers);</span><br><span class="line">        if ($key !&#x3D;&#x3D; false) &#123;</span><br><span class="line">            unset($this-&gt;observers[$key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 遍历调用观察者的update()方法进行通知，不关心其具体实现方式</span><br><span class="line">    public function notify()</span><br><span class="line">    &#123;</span><br><span class="line">        foreach ($this-&gt;observers as $observer) &#123;</span><br><span class="line">            &#x2F;&#x2F; 把本类对象传给观察者，以便观察者获取当前类对象的信息</span><br><span class="line">            $observer-&gt;update($this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 订单状态有变化时发送通知</span><br><span class="line">    public function addOrder()</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;state &#x3D; 1;</span><br><span class="line">        $this-&gt;notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 获取提供给观察者的状态</span><br><span class="line">    public function getState()</span><br><span class="line">    &#123;</span><br><span class="line">        return $this-&gt;state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;**</span><br><span class="line"> * 观察者接口</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface Observer</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; 接收到通知的处理方法</span><br><span class="line">    public function update(Observable $observable);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 观察者1：发送邮件</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Email implements Observer</span><br><span class="line">&#123;</span><br><span class="line">    public function update(Observable $observable)</span><br><span class="line">    &#123;</span><br><span class="line">        $state &#x3D; $observable-&gt;getState();</span><br><span class="line">        if ($state) &#123;</span><br><span class="line">            echo &#39;发送邮件：您已经成功下单。&#39;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            echo &#39;发送邮件：下单失败，请重试。&#39;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 观察者2：短信通知</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Message implements Observer</span><br><span class="line">&#123;</span><br><span class="line">    public function update(Observable $observable)</span><br><span class="line">    &#123;</span><br><span class="line">        $state &#x3D; $observable-&gt;getState();</span><br><span class="line">        if ($state) &#123;</span><br><span class="line">            echo &#39;短信通知：您已下单成功。&#39;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            echo &#39;短信通知：下单失败，请重试。&#39;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 观察者3：记录日志</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Log implements Observer</span><br><span class="line">&#123;</span><br><span class="line">    public function update(Observable $observable)</span><br><span class="line">    &#123;</span><br><span class="line">        echo &#39;记录日志：生成了一个订单记录。&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 创建观察者对象</span><br><span class="line">$email &#x3D; new Email();</span><br><span class="line">$message &#x3D; new Message();</span><br><span class="line">$log &#x3D; new Log();</span><br><span class="line">&#x2F;&#x2F; 创建订单对象</span><br><span class="line">$order &#x3D; new Order();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 向订单对象中注册3个观察者：发送邮件、短信通知、记录日志</span><br><span class="line">$order-&gt;attach($email);</span><br><span class="line">$order-&gt;attach($message);</span><br><span class="line">$order-&gt;attach($log);</span><br><span class="line">&#x2F;&#x2F; 添加订单，添加时会自动发送通知给观察者</span><br><span class="line">$order-&gt;addOrder();</span><br><span class="line"></span><br><span class="line">echo &#39;&lt;br &#x2F;&gt;&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 删除记录日志观察者</span><br><span class="line">$order-&gt;detach($log);</span><br><span class="line">&#x2F;&#x2F; 添加另一个订单，会再次发送通知给观察着</span><br><span class="line">$order-&gt;addOrder();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><p>策略模式定义了一族相同类型的算法，算法之间独立封装，并且可以互换代替。</p>
<p>这些算法是同一类型问题的多种处理方式，他们具体行为有差别。</p>
<p>每一个算法、或说每一种处理方式称为一个策略。</p>
<p>在应用中，就可以根据环境的不同，选择不同的策略来处理问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;那如何用策略模式解决这个问题呢？</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;策略模式将各种方案分离开来，让操作者根据具体的需求，动态地选择不同的策略方案。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;2.1 策略类</span><br><span class="line">&#x2F;&#x2F;首先，定义一系列的策略类，它们独立封装，并且遵循统一的接口。</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 策略接口</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface OutputStrategy</span><br><span class="line">&#123;</span><br><span class="line">    public function render($array);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 策略类1：返回序列化字符串</span><br><span class="line"> *&#x2F;</span><br><span class="line">class SerializeStrategy implements OutputStrategy</span><br><span class="line">&#123;</span><br><span class="line">    public function render($array)</span><br><span class="line">    &#123;</span><br><span class="line">        return serialize($array);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 策略类2：返回JSON编码后的字符串</span><br><span class="line"> *&#x2F;</span><br><span class="line">class JsonStrategy implements OutputStrategy</span><br><span class="line">&#123;</span><br><span class="line">    public function render($array)</span><br><span class="line">    &#123;</span><br><span class="line">        return json_encode($array);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 策略类3：直接返回数组</span><br><span class="line"> *&#x2F;</span><br><span class="line">class ArrayStrategy implements OutputStrategy</span><br><span class="line">&#123;</span><br><span class="line">    public function render($array)</span><br><span class="line">    &#123;</span><br><span class="line">        return $array;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;&#x2F;以后的维护过程中，以上代码都不需修改了。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;如果需要增加输出方式，重新建一个类就可以了。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;&#x2F;（根据FIG-PSR规范，一个类就是一个独立的PHP文件。）</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;2.2 环境类</span><br><span class="line">&#x2F;&#x2F;环境角色用来管理策略，实现不同策略的切换功能。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;同样，一旦写好，环境角色类以后也不需要修改了。</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 环境角色类</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Output</span><br><span class="line">&#123;</span><br><span class="line">    private $outputStrategy;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 传入的参数必须是策略接口的子类或子类的实例</span><br><span class="line">    public function __construct(OutputStrategy $outputStrategy)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;outputStrategy &#x3D; $outputStrategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function renderOutput($array)</span><br><span class="line">    &#123;</span><br><span class="line">        return $this-&gt;outputStrategy-&gt;render($array);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;2.3 客户端代码</span><br><span class="line">&#x2F;&#x2F;在客户端中，策略模式通过给予不同的具体策略，来获取不同的结果。</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;**</span><br><span class="line"> * 客户端代码</span><br><span class="line"> *&#x2F;</span><br><span class="line">$test &#x3D; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 需要返回数组</span><br><span class="line">$output &#x3D; new Output(new ArrayStrategy());</span><br><span class="line">$data &#x3D; $output-&gt;renderOutput($test);</span><br><span class="line">var_dump($data);</span><br><span class="line">&#x2F;&#x2F; 需要返回JSON</span><br><span class="line">$output &#x3D; new Output(new JsonStrategy());</span><br><span class="line">$data &#x3D; $output-&gt;renderOutput($test);</span><br><span class="line">var_dump($data);</span><br><span class="line">&#x2F;&#x2F;对于较为复杂的业务逻辑显得更为直观，扩展也更为方便。</span><br></pre></td></tr></table></figure>


<p>以数组输出为例。</p>
<p>数组的输出有序列化输出、JSON字符串输出和数组格式输出等方式。</p>
<p>每种输出方式都可以独立封装起来，作为一个策略。</p>
<p>应用时，如要把数组保存到数据库中，可以用序列化方式输出。</p>
<p>要提供给APP作接口，可以用JSON字符串输出。</p>
<p>其他程序调用，则直接输出数组格式。</p>
<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><p>不关心内部实现  遍历对象</p>
<p> 1.访问一个聚合对象的内容而无需暴露它的内部表示</p>
<p> 2.支持对聚合对象的多种遍历</p>
<p> 3.为遍历不同的聚合结构提供一个统一的接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;**</span><br><span class="line"> * Created by PhpStorm.</span><br><span class="line"> * User: Jiang</span><br><span class="line"> * Date: 2015&#x2F;6&#x2F;8</span><br><span class="line"> * Time: 21:31</span><br><span class="line"> *&#x2F;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;抽象迭代器</span><br><span class="line">abstract class IIterator</span><br><span class="line">&#123;</span><br><span class="line">    public abstract function First();</span><br><span class="line">    public abstract function Next();</span><br><span class="line">    public abstract function IsDone();</span><br><span class="line">    public abstract function CurrentItem();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;具体迭代器</span><br><span class="line">class ConcreteIterator extends IIterator</span><br><span class="line">&#123;</span><br><span class="line">    private $aggre;</span><br><span class="line">    private $current &#x3D; 0;</span><br><span class="line">    public function __construct(array $_aggre)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;aggre &#x3D; $_aggre;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;返回第一个</span><br><span class="line">    public function First()</span><br><span class="line">    &#123;</span><br><span class="line">        return $this-&gt;aggre[0];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;返回下一个</span><br><span class="line">    public function  Next()</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;current++;</span><br><span class="line">        if($this-&gt;current&lt;count($this-&gt;aggre))</span><br><span class="line">        &#123;</span><br><span class="line">            return $this-&gt;aggre[$this-&gt;current];</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;返回是否IsDone</span><br><span class="line">    public function IsDone()</span><br><span class="line">    &#123;</span><br><span class="line">        return $this-&gt;current&gt;&#x3D;count($this-&gt;aggre)?true:false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;返回当前聚集对象</span><br><span class="line">    public function CurrentItem()</span><br><span class="line">    &#123;</span><br><span class="line">        return $this-&gt;aggre[$this-&gt;current];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">header(&quot;Content-Type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">&#x2F;&#x2F;--------------------------迭代器模式-------------------</span><br><span class="line">&#x2F;&#x2F;require_once &quot;.&#x2F;Iterator&#x2F;Iterator.php&quot;;</span><br><span class="line">$iterator&#x3D; new ConcreteIterator(array(&#39;周杰伦&#39;,&#39;王菲&#39;,&#39;周润发&#39;));</span><br><span class="line">$item &#x3D; $iterator-&gt;First();</span><br><span class="line">echo $item.&quot;&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">while(!$iterator-&gt;IsDone())</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;&#123;$iterator-&gt;CurrentItem()&#125;：请买票！&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">    $iterator-&gt;Next();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>这个模式主要由 命令类、用户请求数据类、业务逻辑类、命令类工厂类及调用类构成，各个类的作用概括如下：</p>
<p>1、命令类：调用用户请求数据类和业务逻辑类；</p>
<p>2、用户请求数据类：获取用户请求数据及保存后台处理后返回的结果；</p>
<p>3、业务逻辑类：如以下的示例中验证用户登陆信息是否正确的功能等；</p>
<p>4、命令工厂类(我自己取的名字,哈哈)：生成命令类的实例，这个类第一次看的时候我觉得有点屌，当然看了几遍了还是觉得很屌 ：）；</p>
<p>5、调用类：调用命令类，生成视图；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;命令类</span><br><span class="line">abstract class Command &#123;</span><br><span class="line">　　abstract function execute(CommandContext $context);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class LoginCommand extends Command&#123;　　　　　　　&#x2F;&#x2F;处理用户登陆信息的命令类</span><br><span class="line">　　function execute (CommandCotext $context)&#123;　　　　&#x2F;&#x2F;CommandCotext 是一个处理用户请求数据和后台回馈数据的类</span><br><span class="line">　　　　$manager &#x3D; Registry::getAccessManager();　　&#x2F;&#x2F;原文代码中并没有具体的实现，但说明了这是一个处理用户登陆信息的业务逻辑类</span><br><span class="line">　　　　$user &#x3D; $context-&gt;get(&#39;username&#39;);</span><br><span class="line">　　　　$pass &#x3D; $context-&gt;get(&#39;pass&#39;);</span><br><span class="line">　　　　$user_obj &#x3D; $manager-&gt;login($user,$pass);</span><br><span class="line">　　　　if(is_null($user_obj))&#123;</span><br><span class="line">　　　　　　$context-&gt;setError($manager-&gt;getError);</span><br><span class="line">　　　　　　return false;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　$context-&gt;addParam(&#39;user&#39;,$user_obj);</span><br><span class="line">　　　　return true;　　　　　　　　　　　　　　　&#x2F;&#x2F;用户登陆成功返回true</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class FeedbackCommand extends Command&#123;　　　　　　　　&#x2F;&#x2F;发送邮件的命令类</span><br><span class="line">　　function execute(CommandContext $context)&#123;</span><br><span class="line">　　　　$msgSystem &#x3D; Registry::getMessageSystem();</span><br><span class="line">　　　　$email &#x3D; $context-&gt;get(&#39;email&#39;);</span><br><span class="line">　　　　$msg &#x3D; $context-&gt;get(&#39;msg&#39;);</span><br><span class="line">　　　　$topic &#x3D; $context-&gt;get(&#39;topci&#39;);</span><br><span class="line">　　　　$result &#x3D; $msgSystem-&gt;send($email,$msg,$topic);</span><br><span class="line">　　　　if(!$result)&#123;</span><br><span class="line">　　　　　　$context-&gt;setError($msgSystem-&gt;getError());</span><br><span class="line">　　　　　　return false;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　return true;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;用户请求数据类  </span><br><span class="line">class CommandContext &#123;</span><br><span class="line">　　private $params &#x3D; array();</span><br><span class="line">　　private $error &#x3D; &#39;&#39;;</span><br><span class="line"> </span><br><span class="line">　　function __construct ()&#123;</span><br><span class="line">　　$this-&gt;params &#x3D; $_REQUEST;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function addParam($key,$val)&#123;</span><br><span class="line">　　$this-&gt;params[$key] &#x3D; $val;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function get($key)&#123;</span><br><span class="line">　　return $this-&gt;params[$key];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function setError($error)&#123;</span><br><span class="line">　　$this-&gt;error &#x3D; $error;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function getError()&#123;</span><br><span class="line">　　return $this-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;命令类工厂,这个类根据用户请求数据中的action来生成命令类</span><br><span class="line">class CommandNotFoundException extends Exception &#123;&#125;</span><br><span class="line"> </span><br><span class="line">class CommandFactory &#123;</span><br><span class="line">　　private static $dir &#x3D; &#39;commands&#39;;</span><br><span class="line"> </span><br><span class="line">　　static function getCommand($action&#x3D;&#39;Default&#39;)&#123;</span><br><span class="line">　　　　if(preg_match(&#39;&#x2F;\w&#39;,$action))&#123;</span><br><span class="line">　　　　　　throw new Exception(&quot;illegal characters in action&quot;);</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　$class &#x3D; UCFirst(strtolower($action)).&quot;Command&quot;;</span><br><span class="line">　　　　$file &#x3D; self::$dir.DIRECTORY_SEPARATOR.&quot;&#123;$class&#125;.php&quot;; &#x2F;&#x2F;DIRECTORY_SEPARATOR代表&#39;&#x2F;&#39;,这是一个命令类文件的路径</span><br><span class="line">　　　　if(!file_exists($file))&#123;</span><br><span class="line">　　　　　　throw new CommandNotFoundException(&quot;could not find &#39;$file&#39;&quot;);</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　require_once($file);</span><br><span class="line">　　　　if(!class_exists($class))&#123;</span><br><span class="line">　　　　　　throw new CommandNotFoundException(&quot;no &#39;$class&#39; class located&quot;);</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　$cmd &#x3D; new $class();</span><br><span class="line">　　　　return $cmd;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;调用者类,相当于一个司令部它统筹所有的资源</span><br><span class="line">class Controller&#123;</span><br><span class="line">　　private $context;</span><br><span class="line">　　function __construct()&#123;</span><br><span class="line">　　　　$this-&gt;context &#x3D; new CommandContext();  &#x2F;&#x2F;用户请求数据</span><br><span class="line">　　&#125;</span><br><span class="line">　　function getContext()&#123;</span><br><span class="line">　　　　return $this-&gt;context;</span><br><span class="line">　　&#125;</span><br><span class="line"> </span><br><span class="line">　　function process()&#123;</span><br><span class="line">　　　　$cmd &#x3D; CommandFactory::getCommand($this-&gt;context-&gt;get(&#39;action&#39;));　　　　&#x2F;&#x2F;通过命令工厂类来获取命令类</span><br><span class="line">　　　　if(!$comd-&gt;execute($this-&gt;context))&#123;　　　　　　　　　　　　　　　　　　　　　　</span><br><span class="line">　　　　　　&#x2F;&#x2F;处理失败</span><br><span class="line">　　　　&#125; else &#123;</span><br><span class="line">　　　　　　&#x2F;&#x2F;成功</span><br><span class="line">　　　　　　&#x2F;&#x2F; 分发视图</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; 客户端</span><br><span class="line">$controller &#x3D; new Controller();</span><br><span class="line">&#x2F;&#x2F;伪造用户请求,真实的场景中这些参数应该是通过post或get的方式获取的，貌似又废话了：）</span><br><span class="line">$context &#x3D; $controller-&gt;getContext();</span><br><span class="line">$context-&gt;addParam(&#39;action&#39;,&#39;login&#39;);</span><br><span class="line">$context-&gt;addParam(&#39;username&#39;,&#39;bob&#39;);</span><br><span class="line">$context-&gt;addParam(&#39;pass&#39;,&#39;tiddles&#39;);</span><br><span class="line">$controller-&gt;process();</span><br></pre></td></tr></table></figure>

<h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mingaixin/p/4324156.html">https://www.cnblogs.com/mingaixin/p/4324156.html</a></p>
<h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h3><p>PHP工厂模式概念：工厂模式是一种类，它具有为您创建对象的某些方法。您可以使用工厂类创建对象，而不直接使用 new。这样，如果您想要更改所创建的对象类型，只需更改该工厂即可。使用该工厂的所有代码会自动更改。<br>根据抽象程度不同，PHP工厂模式分为：简单工厂模式、工厂方法模式和抽象工厂模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> *简单工厂模式与工厂方法模式比较。</span><br><span class="line"> *简单工厂又叫静态工厂方法模式，这样理解可以确定，简单工厂模式是通过一个静态方法创建对象的。 </span><br><span class="line"> *&#x2F;</span><br><span class="line">interface  people &#123;</span><br><span class="line">    function  jiehun();</span><br><span class="line">&#125;</span><br><span class="line">class man implements people&#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;送玫瑰，送戒指！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class women implements people &#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;穿婚纱！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class SimpleFactoty &#123;</span><br><span class="line">    &#x2F;&#x2F; 简单工厂里的静态方法</span><br><span class="line">    static function createMan() &#123;</span><br><span class="line">        return new     man;</span><br><span class="line">    &#125;</span><br><span class="line">    static function createWomen() &#123;</span><br><span class="line">        return new     women;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$man &#x3D; SimpleFactoty::createMan();</span><br><span class="line">$man-&gt;jiehun();</span><br><span class="line">$man &#x3D; SimpleFactoty::createWomen();</span><br><span class="line">$man-&gt;jiehun();</span><br></pre></td></tr></table></figure>
<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><p>工厂模式是一种类，它具有为您创建对象的某些方法。您可以使用工厂类创建对象，而不直接使用 new。这样，如果您想要更改所创建的对象类型，只需更改该工厂即可。使用该工厂的所有代码会自动更改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;*</span><br><span class="line"> *工厂方法模式：</span><br><span class="line"> *定义一个创建对象的接口，让子类决定哪个类实例化。 他可以解决简单工厂模式中的封闭开放原则问题。&lt;www.phpddt.com整理&gt;</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface  people &#123;</span><br><span class="line">    function  jiehun();</span><br><span class="line">&#125;</span><br><span class="line">class man implements people&#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;送玫瑰，送戒指！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class women implements people &#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;穿婚纱！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">interface  createMan &#123;  &#x2F;&#x2F; 注意了，这里是简单工厂本质区别所在，将对象的创建抽象成一个接口。</span><br><span class="line">    function create();</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">class FactoryMan implements createMan&#123;</span><br><span class="line">    function create() &#123;</span><br><span class="line">        return  new man;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class FactoryWomen implements createMan &#123;</span><br><span class="line">    function create() &#123;</span><br><span class="line">        return new women;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class  Client &#123;</span><br><span class="line">    &#x2F;&#x2F; 工厂方法</span><br><span class="line">    function test() &#123;</span><br><span class="line">        $Factory &#x3D;  new  FactoryMan;</span><br><span class="line">        $man &#x3D; $Factory-&gt;create();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">        </span><br><span class="line">        $Factory &#x3D;  new  FactoryWomen;</span><br><span class="line">        $man &#x3D; $Factory-&gt;create();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$f &#x3D; new Client;</span><br><span class="line">$f-&gt;test();</span><br></pre></td></tr></table></figure>

<h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><p>工厂模式 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）<br>抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;*</span><br><span class="line">抽象工厂：提供一个创建一系列相关或相互依赖对象的接口。 </span><br><span class="line">注意：这里和工厂方法的区别是：一系列，而工厂方法则是一个。</span><br><span class="line">那么，我们是否就可以想到在接口create里再增加创建“一系列”对象的方法呢？</span><br><span class="line">*&#x2F;</span><br><span class="line">interface  people &#123;</span><br><span class="line">    function  jiehun();</span><br><span class="line">&#125;</span><br><span class="line">class Oman implements people&#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;美女，我送你玫瑰和戒指！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Iman implements people&#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;我偷偷喜欢你&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class Owomen implements people &#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;我要穿婚纱！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class Iwomen implements people &#123;</span><br><span class="line">    function jiehun() &#123;</span><br><span class="line">        echo &#39;我好害羞哦！！&lt;br&gt;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">interface  createMan &#123;  &#x2F;&#x2F; 注意了，这里是本质区别所在，将对象的创建抽象成一个接口。</span><br><span class="line">    function createOpen(); &#x2F;&#x2F;分为 内敛的和外向的</span><br><span class="line">    function createIntro(); &#x2F;&#x2F;内向</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">class FactoryMan implements createMan&#123;</span><br><span class="line">    function createOpen() &#123;</span><br><span class="line">        return  new  Oman;</span><br><span class="line">    &#125;</span><br><span class="line">    function createIntro() &#123;</span><br><span class="line">        return  new Iman;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class FactoryWomen implements createMan &#123;</span><br><span class="line">    function createOpen() &#123;</span><br><span class="line">        return  new  Owomen;</span><br><span class="line">    &#125;</span><br><span class="line">    function createIntro() &#123;</span><br><span class="line">        return  new Iwomen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class  Client &#123;</span><br><span class="line">    &#x2F;&#x2F; 抽象方法</span><br><span class="line">    function test() &#123;</span><br><span class="line">        $Factory &#x3D;  new  FactoryMan;</span><br><span class="line">        $man &#x3D; $Factory-&gt;createOpen();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">        </span><br><span class="line">        $man &#x3D; $Factory-&gt;createIntro();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        $Factory &#x3D;  new  FactoryWomen;</span><br><span class="line">        $man &#x3D; $Factory-&gt;createOpen();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">        </span><br><span class="line">        $man &#x3D; $Factory-&gt;createIntro();</span><br><span class="line">        $man-&gt;jiehun();</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$f &#x3D; new Client;</span><br><span class="line">$f-&gt;test();</span><br></pre></td></tr></table></figure>


<h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><p>举一个小例子，在我们的windows桌面上，==我们打开了一个回收站，当我们试图再次打开一个新的回收站时，Windows系统并不会为你弹出一个新的回收站窗口==。，也就是说在整个系统运行的过程中，系统只维护一个回收站的实例。这就是一个典型的单例模式运用。</p>
<p>  再举一个例子，网站的计数器，一般也是采用单例模式实现，如果你存在多个计数器，每一个用户的访问都刷新计数器的值，这样的话你的实计数的值是难以同步的。但是如果采用单例模式实现就不会存在这样的问题，而且还可以避免线程安全问题。同样多线程的线程池的设计一般也是采用单例模式，这是由于线程池需要方便对池中的线程进行控制<br>单例模式，正如其名，允许我们创建一个而且只能创建一个对象的类。</p>
<p>这在整个系统的协同工作中非常有用，特别明确了只需一个类对象的时候。</p>
<p>那么，为什么要实现这么奇怪的类，只实例化一次？</p>
<p>在很多场景下会用到，如：配置类、Session类、Database类、Cache类、File类等等。</p>
<p>这些只需要实例化一次，就可以在应用全局中使用。<br>单例模式的特点是4私1公：一个私有静态属性，构造方法私有，克隆方法私有，重建方法私有，一个公共静态方法。</p>
<p>其他方法根据需要增加。</p>
<p>最基础的单例模式代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Singleton</span><br><span class="line">&#123;</span><br><span class="line">    private static $instance &#x3D; null;</span><br><span class="line"></span><br><span class="line">    public static function getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        if(self::$instance &#x3D;&#x3D; null) &#123;</span><br><span class="line">            self::$instance &#x3D; new self();</span><br><span class="line">        &#125;</span><br><span class="line">        return self::$instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private function __construct()&#123;&#125;</span><br><span class="line">    private function __clone()&#123;&#125;</span><br><span class="line">    private function __wakeup()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><p>适配器模式，即根据客户端需要，将某个类的接口转换成特定样式的接口，以解决类之间的兼容问题。</p>
<p>如果我们的代码依赖一些外部的API，或者依赖一些可能会经常更改的类，那么应该考虑用适配器模式。</p>
<p>下面我们以集成支付宝支付功能为例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 支付宝支付类</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Alipay</span><br><span class="line">&#123;</span><br><span class="line">    public function sendPayment()</span><br><span class="line">    &#123;</span><br><span class="line">        echo &#39;使用支付宝支付。&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 客户端代码</span><br><span class="line">$alipay &#x3D; new Alipay();</span><br><span class="line">$alipay-&gt;sendPayment();</span><br></pre></td></tr></table></figure>
<p>我们直接实例化Alipay类完成支付功能，这样的客户端代码可能很多。</p>
<p>一段时间后，如果支付宝的Alipay类升级，方法名由sendPayment()变成goPayment()会怎样？</p>
<p>所有用了sendPayment()的客户端代码都要改变。</p>
<p>如果Alipay类频繁升级，或者客户端在很多地方使用，这会是极大的工作量。</p>
<p>2 解决<br>现在我们用适配器模式来解决。</p>
<p>我们在客户端和Alipay类之间加一个中间类，也就是适配器类，转换原始的Alipay为客户端需要的形式。</p>
<p>为让客户端能调用到统一的类方法，我们先定义一个适配器接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 适配器接口，所有的支付适配器都需实现这个接口。</span><br><span class="line"> * 不管第三方支付实现方式如何，对于客户端来说，都</span><br><span class="line"> * 用pay()方法完成支付</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface PayAdapter</span><br><span class="line">&#123;</span><br><span class="line">    public function pay();</span><br><span class="line">&#125;</span><br><span class="line">因为Alipay类我们无法控制，而且它有可能经常更新，所以我们不对它做任何修改。</span><br><span class="line"></span><br><span class="line">我们新建一个AlipayAdapter适配器类，在pay()中转换Alipay的支付功能，如下：</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 支付宝适配器</span><br><span class="line"> *&#x2F;</span><br><span class="line">class AlipayAdapter implements PayAdapter</span><br><span class="line">&#123;</span><br><span class="line">    public function pay()</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F; 实例化Alipay类，并用Alipay的方法实现支付</span><br><span class="line">        $alipay &#x3D; new Alipay();</span><br><span class="line">        $alipay-&gt;sendPayment();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><p>  <a target="_blank" rel="noopener" href="https://www.awaimai.com/patterns/composite">https://www.awaimai.com/patterns/composite</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">abstract class File</span><br><span class="line">&#123;</span><br><span class="line">    abstract function getSize();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class TextFile extends File</span><br><span class="line">&#123;</span><br><span class="line">    public function getSize()</span><br><span class="line">    &#123;</span><br><span class="line">        return 2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ImageFile extends File</span><br><span class="line">&#123;</span><br><span class="line">    public function getSize()</span><br><span class="line">    &#123;</span><br><span class="line">        return 100;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">样，在创建文本或图片对象后，就可以通过getSize()方法获取到它们的大小。</span><br><span class="line"></span><br><span class="line">然后，我们创建一个目录类，它可以把文件组合起来：</span><br><span class="line">class Dir</span><br><span class="line">&#123;</span><br><span class="line">    private $files &#x3D; [];</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 传入参数必须为File文件对象</span><br><span class="line">    public function addFile(File $file)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;files[] &#x3D; $file;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSize()</span><br><span class="line">    &#123;</span><br><span class="line">        $size &#x3D; 0;</span><br><span class="line">        foreach ($this-&gt;files as $file) &#123;</span><br><span class="line">            $size +&#x3D; $file-&gt;getSize();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return $size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class NewDir</span><br><span class="line">&#123;</span><br><span class="line">    private $files &#x3D; [];</span><br><span class="line">    private $dirs &#x3D; [];</span><br><span class="line"></span><br><span class="line">    public function addFile(File $file)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;files[] &#x3D; $file;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function addDir(NewDir $newDir) &#123;</span><br><span class="line">        $this-&gt;dirs &#x3D; $newDir;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function getSize()</span><br><span class="line">    &#123;</span><br><span class="line">        $size &#x3D; 0;</span><br><span class="line">        foreach ($this-&gt;files as $file) &#123;</span><br><span class="line">            $size +&#x3D; $file-&gt;getSize();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        foreach ($this-&gt;dirs as $dir) &#123;</span><br><span class="line">            $size +&#x3D; $dir-&gt;getSize();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return $size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>是不是比之前又复杂了些？</p>
<p>这还不算，我们还需要修改原来的类，可能无意间又影响原来的功能 。</p>
<p>另外，如果我们现在要计算多级子目录的大小、或者从目录中删除目录，是不是还需要修改原有类？</p>
<p>显然，这个模型无法实现这些复杂的功能，我们需要一个更加灵活的模型。</p>
<p>2 组合模式<br>组合模式的解决方法是，用抽象类规范统一的对外接口。</p>
<p>然后，让文件类和目录类实现这个接口，并在目录类中递归计算文件的大小。</p>
<p>同时，目录类比文件类两个方法：add()和remove()，用以管理文件对象。</p>
<p>这样，目录类就能用同样的方式获取自身的大小。</p>
<p>并且，还能灵活从目录总增删子目录和文件。</p>
<p>组合模式的解决方法是，用抽象类规范统一的对外接口。</p>
<p>然后，让文件类和目录类实现这个接口，并在目录类中递归计算文件的大小。</p>
<p>同时，目录类比文件类两个方法：add()和remove()，用以管理文件对象。</p>
<p>这样，目录类就能用同样的方式获取自身的大小。</p>
<p>并且，还能灵活从目录总增删子目录和文件。</p>
<p>这个接口中规范的方法要根据需求来定义，并且同时要考虑独立对象拥有的功能。</p>
<p>如果独立对象之间有差异的功能，不适合聚合在一起，则不能放在组合类中。</p>
<p>在组合模式中，组合对象和独立对象必须实现一个接口。</p>
<p>其中，组合对象必须包含添加和删除节点对象。</p>
<p>组合模式通过和装饰模式有着类似的结构图，但是组合模式旨在构造类，而装饰模式重在不生成子类即可给对象添加职责。</p>
<p>并且，装饰模式重在修饰，而组合模式重在表示。</p>
<h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h3><p>实门面模式就是把几个子系统(实例或者类.统一一个统一的接口进行执行,客户端不用关注子系统,只用门面即可<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010861514/article/details/45167219">https://blog.csdn.net/u010861514/article/details/45167219</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">header(&quot;content-type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">&#x2F;&#x2F; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;php  门面模式(外观模式)  &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line"> &#x2F;* 其实门面模式就是把几个子系统(实例或者类.统一一个统一的接口进行执行,客户端不用关注子系统,只用门面即可 )*&#x2F;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; 门面抽象接口 </span><br><span class="line">interface Facade&#123;   </span><br><span class="line">    public function turnOn() ;</span><br><span class="line">    public function turnOff() ;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; (1) 关闭显示器</span><br><span class="line">class PcLight &#123;</span><br><span class="line">    public function turnOn() &#123;&#125;</span><br><span class="line">    public function turnOff() &#123;</span><br><span class="line">        echo &#39;turn off PcLight &lt;br&gt;&#39; ;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;(2) pc 机器</span><br><span class="line">class Pcmachine &#123;</span><br><span class="line">    public function turnOn() &#123;&#125; </span><br><span class="line">    public function turnOff() &#123;</span><br><span class="line">        echo &#39;turn off PcMathion &lt;br&gt;&#39; ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; (3) 关闭电源</span><br><span class="line">class Power &#123;</span><br><span class="line">    public function turnOn() &#123;&#125; </span><br><span class="line">    public function turnOff() &#123;</span><br><span class="line">        echo &#39;turn off Power &lt;br&gt;&#39; ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; 关机的门面角色 </span><br><span class="line">class PcFacade implements Facade&#123;</span><br><span class="line">     </span><br><span class="line">    private  $PcLight ; </span><br><span class="line">    private  $Pcmachine ; </span><br><span class="line">    private  $Power ; </span><br><span class="line">  </span><br><span class="line">    public function __construct()&#123;</span><br><span class="line">     $this-&gt;PcLight &#x3D; new PcLight();</span><br><span class="line">         $this-&gt;Pcmachine &#x3D; new Pcmachine();</span><br><span class="line">         $this-&gt;Power &#x3D; new Power();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#x2F;&#x2F; 门面角色的应用</span><br><span class="line">     public function turnOff() &#123; </span><br><span class="line">          $this-&gt;PcLight -&gt;turnOff();</span><br><span class="line">          $this-&gt;Pcmachine -&gt;turnOff();</span><br><span class="line">          $this-&gt;Power -&gt;turnOff();</span><br><span class="line">     &#125;</span><br><span class="line">      public function turnOn() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; 应用</span><br><span class="line">$button &#x3D; new PcFacade(); </span><br><span class="line">$button -&gt;turnOff(); </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><p>   代理模式为其他对象提供一种代理以控制对这个对象的访问。在某些情况下，一个对象不适合或者不能直接引用另一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;**</span><br><span class="line"> * Created by PhpStorm.</span><br><span class="line"> * User: LYL</span><br><span class="line"> * Date: 2015&#x2F;5&#x2F;16</span><br><span class="line"> * Time: 16:33</span><br><span class="line"> *&#x2F;</span><br><span class="line"> </span><br><span class="line">&#x2F;**顶层接口</span><br><span class="line"> * Interface IGiveGift</span><br><span class="line"> *&#x2F;</span><br><span class="line">interface IGiveGift</span><br><span class="line">&#123;</span><br><span class="line">    function giveRose();</span><br><span class="line">    function giveChocolate();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;**追求者</span><br><span class="line"> * Class Follower</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Follower implements IGiveGift</span><br><span class="line">&#123;</span><br><span class="line">    private $girlName;</span><br><span class="line"> </span><br><span class="line">    function __construct($name&#x3D;&#39;Girl&#39;)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;girlName&#x3D;$name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    function giveRose()</span><br><span class="line">    &#123;</span><br><span class="line">        echo &quot;&#123;$this-&gt;girlName&#125;:这是我送你的玫瑰，望你能喜欢。&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    function giveChocolate()</span><br><span class="line">    &#123;</span><br><span class="line">        echo &quot;&#123;$this-&gt;girlName&#125;:这是我送你的巧克力，望你能收下。&lt;br&#x2F;&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#x2F;**代理</span><br><span class="line"> * Class Proxy</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Proxy implements IGiveGift</span><br><span class="line">&#123;</span><br><span class="line">    private $follower;</span><br><span class="line"> </span><br><span class="line">    function __construct($name&#x3D;&#39;Girl&#39;)</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;follower&#x3D;new Follower($name);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    function giveRose()</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;follower-&gt;giveRose();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    function giveChocolate()</span><br><span class="line">    &#123;</span><br><span class="line">        $this-&gt;follower-&gt;giveChocolate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">header(&quot;Content-Type:text&#x2F;html;charset&#x3D;utf-8&quot;);</span><br><span class="line">&#x2F;&#x2F;------------------------代理模式测试代码------------------</span><br><span class="line">require_once &quot;.&#x2F;Proxy&#x2F;Proxy.php&quot;;</span><br><span class="line">$proxy&#x3D;new Proxy(&#39;范冰冰&#39;);</span><br><span class="line">$proxy-&gt;giveRose();</span><br><span class="line">$proxy-&gt;giveChocolate();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>






      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/php%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
    <time datetime="2020-11-19T16:00:28.785Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/设计模式与编程思想/设计六大原则  SOLIDW" class="post-007.架构工程/设计模式与编程思想/设计六大原则  SOLIDW post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/%E8%AE%BE%E8%AE%A1%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99%20%20SOLIDW/" data-id="ckhp0x7qx001y932u0i3y1l1j" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[toc]</p>
<h1 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/huangenai/p/6219475.html">https://www.cnblogs.com/huangenai/p/6219475.html</a></p>
<h2 id="单一职责原则-Single-Responsibility-Principle"><a href="#单一职责原则-Single-Responsibility-Principle" class="headerlink" title="单一职责原则(Single Responsibility Principle)"></a>单一职责原则(Single Responsibility Principle)</h2><p>对象应该仅具有一种单一职责的概念。</p>
<p>换句话说就是让一个类只做一种类型责任，当这个类需要承担其他类型的责任的时候，就需要分解这个类。</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>  例如支付</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">namespace SOLID</span><br><span class="line">&#123;</span><br><span class="line">    public class Users</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 支付</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void Pay()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 数据库操作</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void DataAccess()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 日志操作</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void Logger()&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个用户类中有这三个功能：1.支付逻辑，2数据库逻辑，3.日志操作。如果将这三个功能结合在一个类中，可能会出现修改部分代码时会破坏其他的部分。多个功能也使这个用户类难以理解，降低了内聚性。所以最好就是将这个类分离为三个分离的类，每个类仅仅有一个功能。<br>改进 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">namespace SOLID</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; 数据库操作</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    class DataAccess &#123; &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; 日志</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    class Logger &#123; &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; 支付</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    class Pay &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>单一职责原则是实现高内聚、低耦合的指导方针，它是最简单但又最难运用的原则，需要设计人员发现类的不同职责并将其分离，而发现类的多重职责需要设计人员具有较强的分析设计能力和相关实践经验。</p>
<p>例子：手机与照相机，它们都有照相的功能，但是手机的功能不仅仅只有照相还可以打电话，听音乐；但是照相机就只负责照相。因此这里面的手机职能就过多，在维护，等方面就会比单一职责的困难很多。</p>
<h2 id="开闭原则（Open-Close-Principle）"><a href="#开闭原则（Open-Close-Principle）" class="headerlink" title="开闭原则（Open Close Principle）"></a>开闭原则（Open Close Principle）</h2><p>“软件体应该是对于扩展开放的，但是对于修改封闭的”的概念</p>
<p>你不是要变化吗？，那么我就让你继承实现一个对象，用一个接口来抽象你的职责，你变化越多，继承实现的子类就越多。<br>例如抽象的 数据库操作 是可以 扩展为mysql 或 orcle  mysqlOdp 此思想</p>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">abstract class DataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        public abstract void OpenConnection();</span><br><span class="line">        public abstract void CloseConnection();</span><br><span class="line">        public abstract void ExecuteCommand();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; SQL</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    class SqlDataAccess : DataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 打开SQL数据库</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void OpenConnection()&#123;&#125;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 关闭Sql数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void CloseConnection()&#123;&#125;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 执行Sql数据命令</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void ExecuteCommand()&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">    &#x2F;&#x2F;&#x2F; ORACLE</span><br><span class="line">    &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">    class OracleDataAccess : DataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 打开Oracle数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void OpenConnection()&#123;&#125;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 关闭Oracle数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void CloseConnection()&#123;&#125;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 执行Oracle数据命令</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public override void ExecuteCommand()&#123;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="里氏代换原则-（Liskov-Substitution-Principle）"><a href="#里氏代换原则-（Liskov-Substitution-Principle）" class="headerlink" title="里氏代换原则 （Liskov Substitution Principle）"></a>里氏代换原则 （Liskov Substitution Principle）</h2><p>“程序中的对象应该是可以在不改变程序正确性的前提下被它的子类所替换的”<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenxkang/p/6657384.html">https://www.cnblogs.com/chenxkang/p/6657384.html</a><br>例子：企鹅是一种特殊的鸟，但是企鹅不会飞，若是在鸟这类中添加，飞这个行为，，那么企鹅将不能继承这个类。</p>
<h2 id="接口隔离原则-（Interface-Segregation-Principle）"><a href="#接口隔离原则-（Interface-Segregation-Principle）" class="headerlink" title="接口隔离原则 （Interface Segregation Principle）"></a>接口隔离原则 （Interface Segregation Principle）</h2><p>“多个特定客户端接口要好于一个宽泛用途的接口”<br>==不能强迫用户去依赖那些他们不使用的接口==。</p>
<h3 id="背景和例子"><a href="#背景和例子" class="headerlink" title="背景和例子"></a>背景和例子</h3><p> 换句话说，使用多个专门的接口比使用单一的总接口总要好。注意：在代码中应用ISP并不一定意味着服务就是绝对安全的。仍然需要采用良好的编码实践，以确保正确的验证与授权。<br>这个原则起源于施乐公司，他们需要建立了一个新的打印机系统，可以执行诸如装订的印刷品一套，传真多种任务。此系统软件创建从底层开始编制，并实现了这些 任务功能，但是不断增长的软件功能却使软件本身越来越难适应变化和维护。每一次改变，即使是最小的变化，有人可能需要近一个小时的重新编译和重新部署。这 是几乎不可能再继续发展，所以他们聘请罗伯特Robert帮助他们。他们首先设计了一个主要类Job,几乎能够用于实现所有任务功能。只要调用Job类的 一个方法就可以实现一个功能，Job类就变动非常大，是一个胖模型啊，对于客户端如果只需要一个打印功能，但是其他无关打印的方法功能也和其耦合，ISP 原则建议在客户端和Job类之间增加一个接口层，对于不同功能有不同接口，比如打印功能就是Print接口，然后将大的Job类切分为继承不同接口的子 类，这样有一个Print Job类，等等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">interface IDataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        void OpenConnection();</span><br><span class="line">        void CloseConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    interface ISqlDataAccess : IDataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        void ExecuteSqlCommand();</span><br><span class="line">    &#125;</span><br><span class="line">    interface IOracleDataAccess : IDataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        void ExecuteOracleCommand();</span><br><span class="line">    &#125;</span><br><span class="line">    class SqlDataAccess : ISqlDataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 执行Sql数据命令</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void ExecuteSqlCommand()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 打开Sql数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void OpenConnection()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 关闭Sql数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void CloseConnection()&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    class OracleDataAccess : IOracleDataAccess</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 执行Oracle数据命令</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void ExecuteOracleCommand()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 打开Oracle数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void OpenConnection()&#123;&#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 关闭Oracle数据连接</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        public void CloseConnection()&#123;&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<h2 id="依赖倒转原则-Dependency-Inversion-Principle（解耦必备原则）"><a href="#依赖倒转原则-Dependency-Inversion-Principle（解耦必备原则）" class="headerlink" title="依赖倒转原则  Dependency Inversion Principle（解耦必备原则）"></a>依赖倒转原则  Dependency Inversion Principle（解耦必备原则）</h2><p>我们是会用的电脑，cpu，内存等是分开的，当有那个地方出问题的时候，只需要将出问题的零件替换掉，但是想一想收音机，里面错综复杂，每个零件之间相互依赖，也许碰到一个其他的也会因此出问题。</p>
<p>依赖于抽象而不是一个实例</p>
<p>依赖反转原则： 依赖反转原则 认为一个方法应该遵从“依赖于抽象而不是一个实例” 的概念。依赖注入是该原则的一种实现方式。</p>
<p>依赖倒置原则(Dependency Inversion Principle，DIP)规定：代码应当取决于抽象概念，而不是具体实现。<br>==高层模块不应该依赖于低层模块==，二者都应该依赖于抽象<br>抽象不应该依赖于细节，细节应该依赖于抽象 </p>
<p>类可能依赖于其他类来执行其工作。但是，它们不应当依赖于该类的特定具体实现，而应当是它的抽象。这个原则实在是太重要了，社会的分工化，标准化都 是这个设计原则的体现。显然，这一概念会大大提高系统的灵活性。如果类只关心它们用于支持特定契约而不是特定类型的组件，就可以快速而轻松地修改这些低级 服务的功能，同时最大限度地降低对系统其余部分的影响。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">interface IBankAccount</span><br><span class="line">    &#123;</span><br><span class="line">        long BankNumber &#123; get; set; &#125; &#x2F;&#x2F; 卡号</span><br><span class="line">        decimal Balance &#123; get; set; &#125; &#x2F;&#x2F; 余额</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 转账人</span><br><span class="line">    interface ITransferSource : IBankAccount</span><br><span class="line">    &#123;</span><br><span class="line">        void CutPayment(decimal value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 收款人</span><br><span class="line">    interface ITransferDestination : IBankAccount</span><br><span class="line">    &#123;</span><br><span class="line">        void AddMoney(decimal value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    class BankAccout : IBankAccount, ITransferSource, ITransferDestination</span><br><span class="line">    &#123;</span><br><span class="line">        public long BankNumber &#123; get; set; &#125;</span><br><span class="line">        public decimal Balance &#123; get; set; &#125;</span><br><span class="line">        public void CutPayment(decimal value)</span><br><span class="line">        &#123;</span><br><span class="line">            Balance -&#x3D; value;</span><br><span class="line">        &#125;</span><br><span class="line">        public void AddMoney(decimal value)</span><br><span class="line">        &#123;</span><br><span class="line">            Balance +&#x3D; value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    class TransferAmount</span><br><span class="line">    &#123;</span><br><span class="line">        public decimal Amount &#123; get; set; &#125;</span><br><span class="line">        public void Transfer(ITransferSource source, ITransferDestination dest)</span><br><span class="line">        &#123;</span><br><span class="line">            source.CutPayment(Amount);</span><br><span class="line">            dest.AddMoney(Amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<h2 id="迪米特法则"><a href="#迪米特法则" class="headerlink" title="迪米特法则"></a>迪米特法则</h2><p>迪米特法则(Law of Demeter )又叫做最少知识原则，也就是说，一个对象应当对其他对象尽可能少的了解。不和陌生人说话。英文简写为: LoD。</p>
<p>目的</p>
<p>　　在于降低类与类之间的耦合。由于每个类尽量减少对其他类的依赖，因此，很容易使得系统的功能模块功能独立，是的相互间存在尽可能少的依赖关系。</p>
<p>优点</p>
<p>　　迪米特法则的做法观念就是类间解耦，弱耦合，只有弱耦合了以后，类的复用率才可以提高。</p>
<p>缺点</p>
<p>  　  造成系统的不同模块之间的通信效率降低，使系统的不同模块之间不容易协调等缺点。</p>
<p> 　　因为迪米特法则要求类与类之间尽量不直接通信，如果类之间需要通信就通过第三方转发的方式，这就直接导致了系统中存在大量的中介类，大大增加了系统的复杂度。</p>
<p>　　解决这个问题的方式是：使用依赖倒转原则（通俗的讲就是要针对接口编程，不要针对具体编程）， 这要就可以是调用方和被调用方之间有了一个抽象层，被调用方在遵循抽象层的前提下就可以自由的变化，此时抽象层成了调用方的朋友。</p>
<pre><code>第一：在类的划分上，应当创建弱耦合的类，类与类之间的耦合越弱，就越有利于实现可复用的目标。
第二：在类的结构设计上，每个类都应该降低成员的访问权限。
第三：在类的设计上，只要有可能，一个类应当设计成不变的类。
第四：在对其他类的引用上，一个对象对其他类的对象的引用应该降到最低。
第五：尽量限制局部变量的有效范围，降低类的访问权限。</code></pre>
<p> 简单示例：</p>
<p>　　上课时，教师让学习委员进行点名
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPrinciples.LowOfDemeter</span><br><span class="line">&#123;</span><br><span class="line">    class Program</span><br><span class="line">    &#123;</span><br><span class="line">        static void Main(string[] args)</span><br><span class="line">        &#123;</span><br><span class="line">            GroupLeader group &#x3D; new GroupLeader();</span><br><span class="line">            Teacher teacher &#x3D; new Teacher();</span><br><span class="line">            teacher.Command(group);</span><br><span class="line">            Console.WriteLine(&quot;&#x3D;&#x3D;&#x3D;&#x3D; 我是分割线 &#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line">            teacher.CommandByDemeter(group);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class Teacher</span><br><span class="line">    &#123; </span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 教师发送命令</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;group&quot;&gt;&lt;&#x2F;param&gt;</span><br><span class="line">        public void Command(GroupLeader group)</span><br><span class="line">        &#123;</span><br><span class="line">            List&lt;Student&gt; students &#x3D; new List&lt;Student&gt;();</span><br><span class="line">            for (int i &#x3D; 0; i &lt; 20; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                students.Add(new Student());</span><br><span class="line">            &#125;</span><br><span class="line">            group.Count(students);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void CommandByDemeter(GroupLeader group)</span><br><span class="line">        &#123; </span><br><span class="line">            group.CountByDemeter();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class GroupLeader</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 学习委员点名</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;girls&quot;&gt;&lt;&#x2F;param&gt;</span><br><span class="line">        public void Count(List&lt;Student&gt; girls)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(&quot;学生人数：&quot; + girls.Count);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void CountByDemeter()</span><br><span class="line">        &#123;</span><br><span class="line">            List&lt;Student&gt; students &#x3D; new List&lt;Student&gt;();</span><br><span class="line">            for (int i &#x3D; 0; i &lt; 20; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                students.Add(new Student());</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine(&quot;学生人数（迪米特）：&quot; + students.Count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class Student</span><br><span class="line">    &#123;</span><br><span class="line">        public string Name &#123; get; set; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/%E8%AE%BE%E8%AE%A1%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99%20%20SOLIDW/">
    <time datetime="2020-11-19T16:00:28.784Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-007.架构工程/设计模式与编程思想/面向对象的编程思想， 继承、封装 多态三大特征" class="post-007.架构工程/设计模式与编程思想/面向对象的编程思想， 继承、封装 多态三大特征 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://zedhao.github.io/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%EF%BC%8C%20%E7%BB%A7%E6%89%BF%E3%80%81%E5%B0%81%E8%A3%85%20%E5%A4%9A%E6%80%81%E4%B8%89%E5%A4%A7%E7%89%B9%E5%BE%81/" data-id="ckhp0x7qy001z932u1u2kh6pi" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>[toc]</p>
<h1 id="面向对象-oo-VS-面向过程-op"><a href="#面向对象-oo-VS-面向过程-op" class="headerlink" title="面向对象 oo  VS 面向过程 op"></a>面向对象 oo  VS 面向过程 op</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/28427324">https://zhuanlan.zhihu.com/p/28427324</a><br>例如设计一个五子棋</p>
<h2 id="op面向过程"><a href="#op面向过程" class="headerlink" title="op面向过程"></a>op面向过程</h2><p>（1）开始游戏（2）黑子先走（3）绘制画面（4）判断输赢（5）轮到白子（6）绘制画面（7）判断输赢（8）返回步骤（2） （9）输出最后结果。</p>
<p>用函数实现上面一个一个的步骤，然后在下五子棋的主函数里依次调用上面的函数（不同的编程语言有不同的调用方法，我这里写的是直接调用）：</p>
<p>下五子棋{</p>
<p>开始游戏（）；</p>
<p>黑子先走（）；</p>
<p>绘制画面（）；</p>
<p>判断输赢（）；</p>
<p>轮到白子（）；</p>
<p>绘制画面（）；</p>
<p>判断输赢（）；</p>
<p>返回到 黑子先走（）；</p>
<p>输出最后结果；</p>
<p>}<br>可见，面向过程始终关注的是怎么一步一步地判断棋局输赢的，通过控制代码，从而实现函数的顺序执行。</p>
<h2 id="oo-面向对象"><a href="#oo-面向对象" class="headerlink" title="oo 面向对象"></a>oo 面向对象</h2><p>在下五子棋的例子中，用面向对象的方法来解决的话，首先将整个五子棋游戏分为三个对象:</p>
<p>（1）黑白双方，这两方的行为是一样的。</p>
<p>（2）棋盘系统，负责绘制画面</p>
<p>（3）规则系统，负责判定犯规、输赢等。</p>
<p>然后赋予每个对象一些属性和行为：</p>
<p>（4）第一类对象（黑白双方）负责接受用户输入，并告知第二类对象（棋盘系统）棋子布局的变化，棋盘系统接收到了棋子的变化，并负责在屏幕上面显示出这种变化，同时利用第三类对象（规则系统）来对棋局进行判定。</p>
<p>可以看出，面向对象是以功能来划分问题，而不是以步骤解决。比如绘制画面这个行为，在面向过程中是分散在了多个步骤中的，可能会出现不同的绘制版本，所以要考虑到实际情况进行各种各样的简化。而面向对象的设计中，绘图只可能在棋盘系统这个对象中出现，从而保证了绘图的统一。</p>
<h2 id="举例说明两者的优缺点"><a href="#举例说明两者的优缺点" class="headerlink" title="举例说明两者的优缺点"></a>举例说明两者的优缺点</h2><p>比如在五子棋游戏中增加悔棋的功能。在面向过程中，从输入到显示再到最后判断的整个步骤都要改动，甚至函数的调用顺序也要改动，而在面向对象的设计中，只需在棋盘系统中增加一个回溯的功能就可以了，黑白双方和规则系统的属性和行为都不需改动。这个例子说明了面向对象程序设计中代码间的相关性低（低耦合特性），使得代码很容易被复用和扩展，同时也说明了面向过程的代码重用性低、扩展能力差。</p>
<h2 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h2><p>比如我从冰箱拿饮料，面向过程要定义三个分离的函数：f1（我的右手，冰箱）: 我右手打开冰箱； f2(我的左手，饮料)：我左手拿出饮料；f3(我的右手，冰箱)：我右手关上冰箱。面向对象就是定义一个对象”我”，我有两个属性：左手，右手，三个方法：打开冰箱；拿出饮料；关上冰箱。这三个方法中，可以直接通过self.左手，self.右手 去实现，而不需要”在打开冰箱”时还要传一个参数为：我的左手</p>
<h2 id="例三"><a href="#例三" class="headerlink" title="例三"></a>例三</h2><p>a. 面向过程：定义上学这个过程，如果有小红，二蛋，大傻等10个人呢，他们上学方式一样还好，如果有坐车的，有走路的不一样，就得定义10个上学的过程分别对应<br>b. 面向对象，定义一个人（或学生），定义一个上学方法，如果是10个人，最多在这个学生中定义10个方法。<br>c. 如果在上学途中，小明想买冰棒，想泡妞，怎么办？面向过程就得添加买冰棒，泡妞这个过程，而面向对象，只需在学生类中添加 泡妞，买冰棒的方法 </p>
<h1 id="继承-封装-多态"><a href="#继承-封装-多态" class="headerlink" title="继承 封装  多态"></a>继承 封装  多态</h1><h2 id="封装-其实就是面向对象oo的思想"><a href="#封装-其实就是面向对象oo的思想" class="headerlink" title="封装 其实就是面向对象oo的思想"></a>封装 其实就是面向对象oo的思想</h2><p>　　　　A.定义：<br>　　　　==封装就是将抽象得到的数据和行为相结合，形成一个有机的整体，也就是将数据与操作数据的源代码进行有机的结合，形成类==，其中数据和函数都是类的成员，目的在于将对象的使用者和设计者分开，以提高软件的可维护性和可修改性</p>
<p>　　　　B.特性：</p>
<ul>
<li>　　　　1. 结合性，即是将属性和方法结合   </li>
<li>　　　　2. 信息隐蔽性，利用接口机制隐蔽内部实现细节，只留下接口给外界调用   </li>
<li>　　　　3. 实现代码重用<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2></li>
</ul>
<p>　　　　定义：继承就是新类从已有类那里得到已有的特性。 类的派生指的是从已有类产生新类的过程。原有的类成为基类或父类，产生的新类称为派生类或子类，</p>
<p>　　　子类继承基类后，可以创建子类对象来调用基类函数，变量等</p>
<ul>
<li>　　　单一继承：继承一个父类，这种继承称为单一继承，一般情况尽量使用单一继承，使用多重继承容易造成混乱易出问题(php)</li>
<li>　　　多重继承：继承多个父类，类与类之间要用逗号隔开，类名之前要有继承权限，假使两个或两个基类都有某变量或函数，在子类中调用时需要加类名限定符如c.a::i = 1；(C++)</li>
<li>　　　菱形继承：多重继承掺杂隔代继承1-n-1模式，此时需要用到虚继承，例如 B，C虚拟继承于A，D再多重继承B，C，否则会出错</li>
<li>　　　继承权限：继承方式规定了如何访问继承的基类的成员。继承方式指定了派生类成员以及类外对象对于从基类继承来的成员的访问权限</li>
<li>　　  继承权限：子类继承基类除构造和析构函数以外的所有成员</li>
</ul>
<p>　　　　继承也分为接口继承和实现继承：</p>
<p>　　　　　　普通成员函数的接口总是会被继承：　　子类继承一份接口和一份强制实现</p>
<p>　　　　　　普通虚函数被子类重写　　　　　：　　子类继承一份接口和一份缺省实现</p>
<p>　　　　　　纯虚函数只能被子类继承接口　　：　　子类继承一份接口，没有继承实现<br>　　　　　　<br>　　　　　　<img src="https://images2015.cnblogs.com/blog/1048430/201611/1048430-20161107095657280-1519112029.png" alt="image">
　　　　　　</p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>三大特征：</p>
<p>子类继承父类<br>子类重写父类<br>父类指向子类</p>
<p>举个模型例子，一家公司有员工类（Employee），还有其子类：销售（Sales）、市场（Market）、工程师（Engineer）等。某一天老板招待所有的员工开了个短会，完了之后对所有的员工（Employee）说，大家回去工作吧。在这里我们可以认为老板调用了所有员工对象的continueToWork()方法，而不是对一个个员工细说做什么工作，比如对销售部说你去制定销售计划（调用makeSalePlan();），对市场部说你去制定产品的价格（调用makeProductPrice();）….这种逐个细说的方式并不是面向对象，而是面向个体。可以确定的是，员工类应该有一个方法continueToWork()。而员工如何实现他们工作的方法却只有精确到子类才能确定，因为不同的员工的工作方式是不一样的。因此，我们很多时候只需要关心对象的父类型，而忽略更精确的子类型，比如上面老板叫大家回去工作时，他对全体员工说的，主要指的是全体员工类型。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">abstract class Employee&#123;</span><br><span class="line">    abstract function continueToWork();</span><br><span class="line">&#125;</span><br><span class="line">class Sales extends Employee&#123;</span><br><span class="line">    private function makeSalePlan()&#123;</span><br><span class="line">        echo &quot;make sale plan&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeSalePlan();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Market extends Employee&#123;</span><br><span class="line">    private function makeProductPrice()&#123;</span><br><span class="line">        echo &quot;make product price&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeProductPrice();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Engineer extends Employee&#123;</span><br><span class="line">    private function makeNewProduct()&#123;</span><br><span class="line">        echo &quot;make new product&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function continueToWork()&#123;</span><br><span class="line">        $this-&gt;makeNewProduct();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Demo&#123;</span><br><span class="line">    public function Work($employeeObj)&#123;</span><br><span class="line">        $employeeObj-&gt;continueToWork();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;调用</span><br><span class="line">$obj &#x3D; new Demo();</span><br><span class="line">$obj-&gt;Work(new Sales());</span><br><span class="line">$obj-&gt;Work(new Market());</span><br><span class="line">$obj-&gt;Work(new Engineer());</span><br><span class="line">?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/huanghao.github.io/2020/11/20/007.%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%EF%BC%8C%20%E7%BB%A7%E6%89%BF%E3%80%81%E5%B0%81%E8%A3%85%20%E5%A4%9A%E6%80%81%E4%B8%89%E5%A4%A7%E7%89%B9%E5%BE%81/">
    <time datetime="2020-11-19T16:00:28.784Z" class="entry-date">
        2020-11-20
    </time>
</a>
    
    
    </footer>
</article>






  
  
    <nav id="pagination">
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/huanghao.github.io/page/13/">&amp;laquo; Prev</a><a class="page-number" href="/huanghao.github.io/">1</a><span class="space">&hellip;</span><a class="page-number" href="/huanghao.github.io/page/12/">12</a><a class="page-number" href="/huanghao.github.io/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/huanghao.github.io/page/15/">15</a><a class="extend next" rel="next" href="/huanghao.github.io/page/15/">Next &amp;raquo;</a>
      </nav>
    </nav>
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="搜索" />
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/huanghao.github.io/2020/11/20/001.%E8%AF%AD%E8%A8%80/%E6%89%80%E8%B0%93%E7%9A%84%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F/">(no title)</a>
          </li>
        
          <li>
            <a href="/huanghao.github.io/2020/11/20/001.%E8%AF%AD%E8%A8%80/%E4%BD%9C%E7%94%A8%E5%9F%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/huanghao.github.io/2020/11/20/001.%E8%AF%AD%E8%A8%80/%E8%AF%AD%E8%A8%80%E7%B1%BB%E6%A6%82%E8%AE%BA/">(no title)</a>
          </li>
        
          <li>
            <a href="/huanghao.github.io/2020/11/20/001.%E8%AF%AD%E8%A8%80/php/%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E8%81%94%E5%90%88%E4%BD%93/">(no title)</a>
          </li>
        
          <li>
            <a href="/huanghao.github.io/2020/11/20/001.%E8%AF%AD%E8%A8%80/php/php%E6%80%A7%E8%83%BD%E8%B0%83%E6%A0%91+%E9%83%A8%E7%BD%B2+%E6%B5%8B%E8%AF%95/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  
    
  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2020 huanghao
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  
<link rel="stylesheet" href="/huanghao.github.io/fancybox/jquery.fancybox.css">

  
<script src="/huanghao.github.io/fancybox/jquery.fancybox.pack.js"></script>




<script src="/huanghao.github.io/js/script.js"></script>


<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>